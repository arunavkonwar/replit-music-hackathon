var controls,scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(50,$(window).width()/$(window).height(),1,1e3),renderer=new THREE.WebGLRenderer,cubes=new Array;document.body.appendChild(renderer.domElement);for(var i=0,x=0;x<30;x+=2){var j=0;cubes[i]=new Array;for(var y=0;y<30;y+=2){var geometry=new THREE.CubeGeometry(1.5,1.5,1.5),material=new THREE.MeshPhongMaterial({color:randomFairColor(),ambient:8421504,specular:16777215,shininess:20,reflectivity:5.5});cubes[i][j]=new THREE.Mesh(geometry,material),cubes[i][j].position=new THREE.Vector3(x,y,0),scene.add(cubes[i][j]),j++}i++}var light=new THREE.AmbientLight(5263440);scene.add(light);var directionalLight=new THREE.DirectionalLight(16777215,.7);directionalLight.position.set(0,1,1),scene.add(directionalLight),(directionalLight=new THREE.DirectionalLight(16777215,.7)).position.set(1,1,0),scene.add(directionalLight),(directionalLight=new THREE.DirectionalLight(16777215,.7)).position.set(0,-1,-1),scene.add(directionalLight),(directionalLight=new THREE.DirectionalLight(16777215,.7)).position.set(-1,-1,0),scene.add(directionalLight),camera.position.z=50,(controls=new THREE.OrbitControls(camera)).addEventListener("change",render);for(i=0;i<7;i++)controls.pan(new THREE.Vector3(1,0,0)),controls.pan(new THREE.Vector3(0,1,0));var render=function(){if("object"==typeof array&&array.length>0)for(var e=0,r=0;r<cubes.length;r++)for(var n=0;n<cubes[r].length;n++){var i=(array[e]+boost)/30;cubes[r][n].scale.z=i<1?1:i,e+=e<array.length?1:0}requestAnimationFrame(render),controls.update(),renderer.render(scene,camera)};function randomFairColor(){return 65536*(Math.floor(161*Math.random())+64)+256*(Math.floor(161*Math.random())+64)+(Math.floor(161*Math.random())+64)}render(),renderer.setSize($(window).width(),$(window).height());